/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!*****************************************!*\
  !*** multi ./css/style.css ./js/app.js ***!
  \*****************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(/*! /Users/andrea/Code/Games/space/css/style.css */1);
module.exports = __webpack_require__(/*! /Users/andrea/Code/Games/space/js/app.js */2);


/***/ }),
/* 1 */
/*!***********************!*\
  !*** ./css/style.css ***!
  \***********************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Nzcy9zdHlsZS5jc3M/MzJiZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vY3NzL3N0eWxlLmNzc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!*******************!*\
  !*** ./js/app.js ***!
  \*******************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_starfield__ = __webpack_require__(/*! starfield */ 3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_game__ = __webpack_require__(/*! game */ 4);\n// function randomise() {\n//   starfield.stop();\n//   starfield.stars = Math.random()*1000 + 50;\n//   starfield.minVelocity = Math.random()*30+5;\n//   starfield.maxVelocity = Math.random()*50 + starfield.minVelocity;\n//   starfield.start();\n// }\n\n\n\n\nwindow.onload = function () {\n  //  Create the starfield.\n  let container = document.getElementById('starfield');\n  let starfield = new __WEBPACK_IMPORTED_MODULE_0_starfield__[\"a\" /* default */]();\n  starfield.initialise(container);\n  starfield.start();\n\n  //  Setup the canvas.\n  let canvas = document.getElementById(\"gameCanvas\");\n  canvas.width = 800;\n  canvas.height = 600;\n\n  //  Create the game.\n  let game = new __WEBPACK_IMPORTED_MODULE_1_game__[\"a\" /* default */](canvas);\n\n  //  Start the game.\n  game.start();\n\n  //  Listen for keyboard events.\n  window.addEventListener(\"keydown\", function keydown(e) {\n    let keycode = e.which || window.event.keycode;\n    //  Supress further processing of left/right/space (37/29/32)\n    if (keycode == 37 || keycode == 39 || keycode == 32) {\n      e.preventDefault();\n    }\n    game.keyDown(keycode);\n  });\n  window.addEventListener(\"keyup\", function keydown(e) {\n    let keycode = e.which || window.event.keycode;\n    game.keyUp(keycode);\n  });\n\n  function toggleMute() {\n    game.mute();\n    document.getElementById(\"muteLink\").innerText = game.sounds.mute ? \"unmute\" : \"mute\";\n  }\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9qcy9hcHAuanM/NDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBmdW5jdGlvbiByYW5kb21pc2UoKSB7XG4vLyAgIHN0YXJmaWVsZC5zdG9wKCk7XG4vLyAgIHN0YXJmaWVsZC5zdGFycyA9IE1hdGgucmFuZG9tKCkqMTAwMCArIDUwO1xuLy8gICBzdGFyZmllbGQubWluVmVsb2NpdHkgPSBNYXRoLnJhbmRvbSgpKjMwKzU7XG4vLyAgIHN0YXJmaWVsZC5tYXhWZWxvY2l0eSA9IE1hdGgucmFuZG9tKCkqNTAgKyBzdGFyZmllbGQubWluVmVsb2NpdHk7XG4vLyAgIHN0YXJmaWVsZC5zdGFydCgpO1xuLy8gfVxuXG5pbXBvcnQgU3RhcmZpZWxkIGZyb20gJ3N0YXJmaWVsZCdcbmltcG9ydCBHYW1lIGZyb20gJ2dhbWUnXG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgLy8gIENyZWF0ZSB0aGUgc3RhcmZpZWxkLlxuICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJmaWVsZCcpO1xuICBsZXQgc3RhcmZpZWxkID0gbmV3IFN0YXJmaWVsZCgpO1xuICBzdGFyZmllbGQuaW5pdGlhbGlzZShjb250YWluZXIpO1xuICBzdGFyZmllbGQuc3RhcnQoKTtcblxuICAvLyAgU2V0dXAgdGhlIGNhbnZhcy5cbiAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZUNhbnZhc1wiKTtcbiAgY2FudmFzLndpZHRoID0gODAwO1xuICBjYW52YXMuaGVpZ2h0ID0gNjAwO1xuXG4gIC8vICBDcmVhdGUgdGhlIGdhbWUuXG4gIGxldCBnYW1lID0gbmV3IEdhbWUoY2FudmFzKTtcblxuICAvLyAgU3RhcnQgdGhlIGdhbWUuXG4gIGdhbWUuc3RhcnQoKTtcblxuICAvLyAgTGlzdGVuIGZvciBrZXlib2FyZCBldmVudHMuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmdW5jdGlvbiBrZXlkb3duKGUpIHtcbiAgICBsZXQga2V5Y29kZSA9IGUud2hpY2ggfHwgd2luZG93LmV2ZW50LmtleWNvZGU7XG4gICAgLy8gIFN1cHJlc3MgZnVydGhlciBwcm9jZXNzaW5nIG9mIGxlZnQvcmlnaHQvc3BhY2UgKDM3LzI5LzMyKVxuICAgIGlmKGtleWNvZGUgPT0gMzcgfHwga2V5Y29kZSA9PSAzOSB8fCBrZXljb2RlID09IDMyKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGdhbWUua2V5RG93bihrZXljb2RlKTtcbiAgfSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgZnVuY3Rpb24ga2V5ZG93bihlKSB7XG4gICAgbGV0IGtleWNvZGUgPSBlLndoaWNoIHx8IHdpbmRvdy5ldmVudC5rZXljb2RlO1xuICAgIGdhbWUua2V5VXAoa2V5Y29kZSk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZU11dGUoKSB7XG4gICAgZ2FtZS5tdXRlKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtdXRlTGlua1wiKS5pbm5lclRleHQgPSBnYW1lLnNvdW5kcy5tdXRlID8gXCJ1bm11dGVcIiA6IFwibXV0ZVwiO1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvYXBwLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!*************************!*\
  !*** ./js/starfield.js ***!
  \*************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("class Starfield {\n  constructor() {\n    this.fps = 30;\n    this.canvas = document.createElement('canvas');\n    this.width = window.innerWidth;\n    this.height = window.innerHeight;\n    this.minVelocity = 15;\n    this.maxVelocity = 30;\n    this.intervalId = 0;\n    this.starsQuantity = 100;\n    this.stars = [];\n  }\n\n  initialise(div) {\n    let self = this;\n\n    window.addEventListener('resize', event => {\n      self.width = window.innerWidth;\n      self.height = window.innerHeight;\n      self.canvas.width = self.width;\n      self.canvas.height = self.height;\n      self.draw();\n    });\n\n    //\tCreate the canvas.\n    div.appendChild(this.canvas);\n    this.canvas.width = this.width;\n    this.canvas.height = this.height;\n  }\n\n  start() {\n    //\tCreate the stars.\n    for (let i = 0; i < this.starsQuantity; i++) {\n      this.stars[i] = new Star(this.width, this.height, this.minVelocity, this.maxVelocity);\n    }\n\n    let self = this;\n\n    //\tStart the timer.\n    this.intervalId = setInterval(() => {\n      self.update();\n      self.draw();\n    }, 1000 / this.fps);\n  }\n\n  stop() {\n    clearInterval(this.intervalId);\n  }\n\n  update() {\n    let dt = 1 / this.fps;\n\n    this.stars.forEach((star, idx) => {\n      star.y += dt * star.velocity;\n\n      if (star.y > this.height) {\n        this.stars[idx] = new Star(this.width, 0, this.minVelocity, this.maxVelocity);\n      }\n    });\n  }\n\n  draw() {\n    //\tGet the drawing context.\n    let ctx = this.canvas.getContext(\"2d\");\n\n    //\tDraw the background.\n    ctx.fillStyle = '#000000';\n    ctx.fillRect(0, 0, this.width, this.height);\n\n    //\tDraw stars.\n    ctx.fillStyle = '#ffffff';\n\n    this.stars.forEach(star => {\n      ctx.fillRect(star.x, star.y, star.size, star.size);\n    });\n  }\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Starfield;\n\n\nfunction Star(x, y, velocityMin, velocityMax) {\n  this.x = Math.random() * x;\n  this.y = Math.random() * y;\n  this.size = Math.random() * 3 + 1;\n  this.velocity = Math.random() * (velocityMax - velocityMin) + velocityMin;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9qcy9zdGFyZmllbGQuanM/YzIwOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTdGFyZmllbGQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmZwcyA9IDMwXG4gICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIHRoaXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgIHRoaXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0XG4gICAgdGhpcy5taW5WZWxvY2l0eSA9IDE1XG4gICAgdGhpcy5tYXhWZWxvY2l0eSA9IDMwXG4gICAgdGhpcy5pbnRlcnZhbElkID0gMFxuICAgIHRoaXMuc3RhcnNRdWFudGl0eSA9IDEwMFxuICAgIHRoaXMuc3RhcnMgPSBbXVxuICB9XG5cbiAgaW5pdGlhbGlzZShkaXYpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXNcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoZXZlbnQpID0+IHtcbiAgICAgIHNlbGYud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aFxuICAgICAgc2VsZi5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHRcbiAgICAgIHNlbGYuY2FudmFzLndpZHRoID0gc2VsZi53aWR0aFxuICAgICAgc2VsZi5jYW52YXMuaGVpZ2h0ID0gc2VsZi5oZWlnaHRcbiAgICAgIHNlbGYuZHJhdygpXG4gICAgfSlcblxuICAgIC8vXHRDcmVhdGUgdGhlIGNhbnZhcy5cbiAgICBkaXYuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpXG4gICAgdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLndpZHRoXG4gICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHRcbiAgfVxuXG4gIHN0YXJ0KCkge1xuICAgIC8vXHRDcmVhdGUgdGhlIHN0YXJzLlxuICAgIGZvcihsZXQgaT0wOyBpIDwgdGhpcy5zdGFyc1F1YW50aXR5OyBpKyspIHtcbiAgICAgIHRoaXMuc3RhcnNbaV0gPSBuZXcgU3RhciggdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIHRoaXMubWluVmVsb2NpdHksIHRoaXMubWF4VmVsb2NpdHkgKVxuICAgIH1cblxuICAgIGxldCBzZWxmID0gdGhpc1xuXG4gICAgLy9cdFN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZWxmLnVwZGF0ZSgpXG4gICAgICBzZWxmLmRyYXcoKVxuICAgIH0sIDEwMDAgLyB0aGlzLmZwcylcbiAgfVxuXG4gIHN0b3AoKSB7IGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKSB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGxldCBkdCA9IDEgLyB0aGlzLmZwcztcblxuICAgIHRoaXMuc3RhcnMuZm9yRWFjaCgoc3RhciwgaWR4KSA9PiB7XG4gICAgICBzdGFyLnkgKz0gZHQgKiBzdGFyLnZlbG9jaXR5XG5cbiAgICAgIGlmIChzdGFyLnkgPiB0aGlzLmhlaWdodCkge1xuICAgICAgICB0aGlzLnN0YXJzW2lkeF0gPSBuZXcgU3RhciggdGhpcy53aWR0aCwgMCwgdGhpcy5taW5WZWxvY2l0eSwgdGhpcy5tYXhWZWxvY2l0eSApXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGRyYXcoKSB7XG4gICAgLy9cdEdldCB0aGUgZHJhd2luZyBjb250ZXh0LlxuICAgIGxldCBjdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIilcblxuICAgIC8vXHREcmF3IHRoZSBiYWNrZ3JvdW5kLlxuICAgIGN0eC5maWxsU3R5bGUgPSAnIzAwMDAwMCdcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpXG5cbiAgICAvL1x0RHJhdyBzdGFycy5cbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnXG5cbiAgICB0aGlzLnN0YXJzLmZvckVhY2goKHN0YXIpID0+IHtcbiAgICAgIGN0eC5maWxsUmVjdChzdGFyLngsIHN0YXIueSwgc3Rhci5zaXplLCBzdGFyLnNpemUpXG4gICAgfSlcbiAgfVxufVxuXG5mdW5jdGlvbiBTdGFyKHgsIHksIHZlbG9jaXR5TWluLCB2ZWxvY2l0eU1heCkge1xuICB0aGlzLnggPSBNYXRoLnJhbmRvbSgpICogeFxuICB0aGlzLnkgPSBNYXRoLnJhbmRvbSgpICogeVxuICB0aGlzLnNpemUgPSBNYXRoLnJhbmRvbSgpICogMyArIDFcbiAgdGhpcy52ZWxvY2l0eSA9IChNYXRoLnJhbmRvbSgpICogKHZlbG9jaXR5TWF4IC0gdmVsb2NpdHlNaW4pKSArIHZlbG9jaXR5TWluXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8ganMvc3RhcmZpZWxkLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpFQTtBQUFBO0FBQUE7QUFDQTtBQTJFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!********************!*\
  !*** ./js/game.js ***!
  \********************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/*\nspaceinvaders.js\n\nthe core logic for the space invaders game.\n\n*/\n\n/*\nGame Class\n\nThe Game class represents a Space Invaders game.\nCreate an instance of it, change any of the default values\nin the settings, and call 'start' to run the game.\n\nCall 'initialise' before 'start' to set the canvas the game\nwill draw to.\n\nCall 'moveShip' or 'shipFire' to control the ship.\n\nListen for 'gameWon' or 'gameLost' events to handle the game\nending.\n*/\n\n//  Creates an instance of the Game class.\nclass Game {\n  constructor(gameCanvas) {\n    //  Set the initial config.\n    this.config = {\n      bombRate: 0.05,\n      bombMinVelocity: 50,\n      bombMaxVelocity: 50,\n      invaderInitialVelocity: 25,\n      invaderAcceleration: 0,\n      invaderDropDistance: 20,\n      rocketVelocity: 120,\n      rocketMaxFireRate: 2,\n      gameWidth: 400,\n      gameHeight: 300,\n      fps: 50,\n      debugMode: false,\n      invaderRanks: 5,\n      invaderFiles: 10,\n      shipSpeed: 120,\n      levelDifficultyMultiplier: 0.2,\n      pointsPerInvader: 5\n\n      //  All state is in the variables below.\n    };this.lives = 3;\n    this.width = gameCanvas.width;\n    this.height = gameCanvas.height;\n    this.gameBounds = {\n      left: gameCanvas.width / 2 - this.config.gameWidth / 2,\n      right: gameCanvas.width / 2 + this.config.gameWidth / 2,\n      top: gameCanvas.height / 2 - this.config.gameHeight / 2,\n      bottom: gameCanvas.height / 2 + this.config.gameHeight / 2\n    };\n    this.intervalId = 0;\n    this.score = 0;\n    this.level = 1;\n\n    //  The state stack.\n    this.stateStack = [];\n\n    //  Input/output\n    this.pressedKeys = {};\n    this.gameCanvas = gameCanvas;\n\n    //  All sounds.\n    this.sounds = null;\n  }\n\n  moveToState(state) {\n    //  If we are in a state, leave it.\n    if (this.currentState() && this.currentState().leave) {\n      this.currentState().leave(game);\n      this.stateStack.pop();\n    }\n    //  If there's an enter function for the new state, call it.\n    if (state.enter) {\n      state.enter(this);\n    }\n\n    //  Set the current state.\n    this.stateStack.pop();\n    this.stateStack.push(state);\n  }\n\n  //  Start the Game.\n  start() {\n    //  Move into the 'welcome' state.\n    this.moveToState(new WelcomeState());\n\n    //  Set the game variables.\n    this.lives = 3;\n    this.config.debugMode = /debug=true/.test(window.location.href);\n    //  Start the game loop.\n    this.intervalId = setInterval(() => {\n      GameLoop(this);\n    }, 1000 / this.config.fps);\n  }\n\n  //  Returns the current state.\n  currentState() {\n    return this.stateStack.length > 0 ? this.stateStack[this.stateStack.length - 1] : null;\n  }\n\n  //  Mutes or unmutes the game.\n  mute(mute) {\n    //  If we've been told to mute, mute.\n    if (mute === true) {\n      this.sounds.mute = true;\n    } else if (mute === false) {\n      this.sounds.mute = false;\n    } else {\n      // Toggle mute instead...\n      this.sounds.mute = this.sounds.mute ? false : true;\n    }\n  }\n\n  pushState(state) {\n    //  If there's an enter function for the new state, call it.\n    if (state.enter) {\n      state.enter(game);\n    }\n    //  Set the current state.\n    this.stateStack.push(state);\n  }\n\n  popState() {\n    //  Leave and pop the state.\n    if (this.currentState()) {\n      if (this.currentState().leave) {\n        this.currentState().leave(game);\n      }\n\n      //  Set the current state.\n      this.stateStack.pop();\n    }\n  }\n\n  //  The stop function stops the game.\n  stop() {\n    clearInterval(this.intervalId);\n  }\n\n  //  Inform the game a key is down.\n  keyDown(keyCode) {\n    this.pressedKeys[keyCode] = true;\n    //  Delegate to the current state too.\n    if (this.currentState() && this.currentState().keyDown) {\n      this.currentState().keyDown(this, keyCode);\n    }\n  }\n\n  //  Inform the game a key is up.\n  keyUp(keyCode) {\n    delete this.pressedKeys[keyCode];\n    //  Delegate to the current state too.\n    if (this.currentState() && this.currentState().keyUp) {\n      this.currentState().keyUp(this, keyCode);\n    }\n  }\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Game;\n\n\n//  The main loop.\nfunction GameLoop(game) {\n  let currentState = game.currentState();\n  if (currentState) {\n\n    //  Delta t is the time to update/draw.\n    let dt = 1 / game.config.fps;\n\n    //  Get the drawing context.\n    let ctx = game.gameCanvas.getContext(\"2d\");\n\n    //  Update if we have an update function. Also draw\n    //  if we have a draw function.\n    if (currentState.update) {\n      currentState.update(game, dt);\n    }\n    if (currentState.draw) {\n      currentState.draw(game, dt, ctx);\n    }\n  }\n}\n\nclass WelcomeState {\n  enter(game) {\n    // Create and load the sounds.\n    game.sounds = new Sounds();\n    game.sounds.init();\n    game.sounds.loadSound('shoot', 'sounds/shoot.wav');\n    game.sounds.loadSound('bang', 'sounds/bang.wav');\n    game.sounds.loadSound('explosion', 'sounds/explosion.wav');\n  }\n\n  update(game, dt) {}\n\n  draw(game, dt, ctx) {\n    //  Clear the background.\n    ctx.clearRect(0, 0, game.width, game.height);\n\n    ctx.font = \"30px Arial\";\n    ctx.fillStyle = '#ffffff';\n    ctx.textBaseline = \"center\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Space Invaders\", game.width / 2, game.height / 2 - 40);\n    ctx.font = \"16px Arial\";\n\n    ctx.fillText(\"Press 'Space' to start.\", game.width / 2, game.height / 2);\n  }\n\n  keyDown(game, keyCode) {\n    if (keyCode == 32) /*space*/{\n        //  Space starts the game.\n        game.level = 1;\n        game.score = 0;\n        game.lives = 3;\n        game.moveToState(new LevelIntroState(game.level));\n      }\n  }\n}\n\nclass GameOverState {\n  update(game, dt) {}\n\n  draw(game, dt, ctx) {\n    //  Clear the background.\n    ctx.clearRect(0, 0, game.width, game.height);\n\n    ctx.font = \"30px Arial\";\n    ctx.fillStyle = '#ffffff';\n    ctx.textBaseline = \"center\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Game Over!\", game.width / 2, game.height / 2 - 40);\n    ctx.font = \"16px Arial\";\n    ctx.fillText(\"You scored \" + game.score + \" and got to level \" + game.level, game.width / 2, game.height / 2);\n    ctx.font = \"16px Arial\";\n    ctx.fillText(\"Press 'Space' to play again.\", game.width / 2, game.height / 2 + 40);\n  }\n\n  keyDown(game, keyCode) {\n    if (keyCode == 32) /*space*/{\n        //  Space restarts the game.\n        game.lives = 3;\n        game.score = 0;\n        game.level = 1;\n        game.moveToState(new LevelIntroState(1));\n      }\n  }\n}\n\n//  Create a PlayState with the game config and the level you are on.\nclass PlayState {\n  constructor(config, level) {\n    this.config = config;\n    this.level = level;\n\n    //  Game state.\n    this.invaderCurrentVelocity = 10;\n    this.invaderCurrentDropDistance = 0;\n    this.invadersAreDropping = false;\n    this.lastRocketTime = null;\n\n    //  Game entities.\n    this.ship = null;\n    this.invaders = [];\n    this.rockets = [];\n    this.bombs = [];\n  }\n\n  enter(game) {\n    //  Create the ship.\n    this.ship = new Ship(game.width / 2, game.gameBounds.bottom);\n\n    //  Setup initial state.\n    this.invaderCurrentVelocity = 10;\n    this.invaderCurrentDropDistance = 0;\n    this.invadersAreDropping = false;\n\n    //  Set the ship speed for this level, as well as invader params.\n    let levelMultiplier = this.level * this.config.levelDifficultyMultiplier;\n    this.shipSpeed = this.config.shipSpeed;\n    this.invaderInitialVelocity = this.config.invaderInitialVelocity + levelMultiplier * this.config.invaderInitialVelocity;\n    this.bombRate = this.config.bombRate + levelMultiplier * this.config.bombRate;\n    this.bombMinVelocity = this.config.bombMinVelocity + levelMultiplier * this.config.bombMinVelocity;\n    this.bombMaxVelocity = this.config.bombMaxVelocity + levelMultiplier * this.config.bombMaxVelocity;\n\n    //  Create the invaders.\n    let ranks = this.config.invaderRanks;\n    let files = this.config.invaderFiles;\n    let invaders = [];\n    for (let rank = 0; rank < ranks; rank++) {\n      for (let file = 0; file < files; file++) {\n        invaders.push(new Invader(game.width / 2 + (files / 2 - file) * 200 / files, game.gameBounds.top + rank * 20, rank, file, 'Invader'));\n      }\n    }\n    this.invaders = invaders;\n    this.invaderCurrentVelocity = this.invaderInitialVelocity;\n    this.invaderVelocity = { x: -this.invaderInitialVelocity, y: 0 };\n    this.invaderNextVelocity = null;\n  }\n\n  update(game, dt) {\n    //  If the left or right arrow keys are pressed, move\n    //  the ship. Check this on ticks rather than via a keydown\n    //  event for smooth movement, otherwise the ship would move\n    //  more like a text editor caret.\n    if (game.pressedKeys[37]) {\n      this.ship.x -= this.shipSpeed * dt;\n    }\n    if (game.pressedKeys[39]) {\n      this.ship.x += this.shipSpeed * dt;\n    }\n    if (game.pressedKeys[32]) {\n      this.fireRocket();\n    }\n\n    //  Keep the ship in bounds.\n    if (this.ship.x < game.gameBounds.left) {\n      this.ship.x = game.gameBounds.left;\n    }\n    if (this.ship.x > game.gameBounds.right) {\n      this.ship.x = game.gameBounds.right;\n    }\n\n    //  Move each bomb.\n    for (let i = 0; i < this.bombs.length; i++) {\n      let bomb = this.bombs[i];\n      bomb.y += dt * bomb.velocity;\n\n      //  If the rocket has gone off the screen remove it.\n      if (bomb.y > this.height) {\n        this.bombs.splice(i--, 1);\n      }\n    }\n\n    //  Move each rocket.\n    for (let i = 0; i < this.rockets.length; i++) {\n      let rocket = this.rockets[i];\n      rocket.y -= dt * rocket.velocity;\n\n      //  If the rocket has gone off the screen remove it.\n      if (rocket.y < 0) {\n        this.rockets.splice(i--, 1);\n      }\n    }\n\n    //  Move the invaders.\n    let hitLeft = false,\n        hitRight = false,\n        hitBottom = false;\n    for (let i = 0; i < this.invaders.length; i++) {\n      let invader = this.invaders[i];\n      let newx = invader.x + this.invaderVelocity.x * dt;\n      let newy = invader.y + this.invaderVelocity.y * dt;\n      if (hitLeft == false && newx < game.gameBounds.left) {\n        hitLeft = true;\n      } else if (hitRight == false && newx > game.gameBounds.right) {\n        hitRight = true;\n      } else if (hitBottom == false && newy > game.gameBounds.bottom) {\n        hitBottom = true;\n      }\n\n      if (!hitLeft && !hitRight && !hitBottom) {\n        invader.x = newx;\n        invader.y = newy;\n      }\n    }\n\n    //  Update invader velocities.\n    if (this.invadersAreDropping) {\n      this.invaderCurrentDropDistance += this.invaderVelocity.y * dt;\n      if (this.invaderCurrentDropDistance >= this.config.invaderDropDistance) {\n        this.invadersAreDropping = false;\n        this.invaderVelocity = this.invaderNextVelocity;\n        this.invaderCurrentDropDistance = 0;\n      }\n    }\n    //  If we've hit the left, move down then right.\n    if (hitLeft) {\n      this.invaderCurrentVelocity += this.config.invaderAcceleration;\n      this.invaderVelocity = { x: 0, y: this.invaderCurrentVelocity };\n      this.invadersAreDropping = true;\n      this.invaderNextVelocity = { x: this.invaderCurrentVelocity, y: 0 };\n    }\n    //  If we've hit the right, move down then left.\n    if (hitRight) {\n      this.invaderCurrentVelocity += this.config.invaderAcceleration;\n      this.invaderVelocity = { x: 0, y: this.invaderCurrentVelocity };\n      this.invadersAreDropping = true;\n      this.invaderNextVelocity = { x: -this.invaderCurrentVelocity, y: 0 };\n    }\n    //  If we've hit the bottom, it's game over.\n    if (hitBottom) {\n      this.lives = 0;\n    }\n\n    //  Check for rocket/invader collisions.\n    for (let i = 0; i < this.invaders.length; i++) {\n      let invader = this.invaders[i];\n      let bang = false;\n\n      for (let j = 0; j < this.rockets.length; j++) {\n        let rocket = this.rockets[j];\n\n        if (rocket.x >= invader.x - invader.width / 2 && rocket.x <= invader.x + invader.width / 2 && rocket.y >= invader.y - invader.height / 2 && rocket.y <= invader.y + invader.height / 2) {\n\n          //  Remove the rocket, set 'bang' so we don't process\n          //  this rocket again.\n          this.rockets.splice(j--, 1);\n          bang = true;\n          game.score += this.config.pointsPerInvader;\n          break;\n        }\n      }\n      if (bang) {\n        this.invaders.splice(i--, 1);\n        game.sounds.playSound('bang');\n      }\n    }\n\n    //  Find all of the front rank invaders.\n    let frontRankInvaders = {};\n    for (let i = 0; i < this.invaders.length; i++) {\n      let invader = this.invaders[i];\n      //  If we have no invader for game file, or the invader\n      //  for game file is futher behind, set the front\n      //  rank invader to game one.\n      if (!frontRankInvaders[invader.file] || frontRankInvaders[invader.file].rank < invader.rank) {\n        frontRankInvaders[invader.file] = invader;\n      }\n    }\n\n    //  Give each front rank invader a chance to drop a bomb.\n    for (let i = 0; i < this.config.invaderFiles; i++) {\n      let invader = frontRankInvaders[i];\n      if (!invader) continue;\n      let chance = this.bombRate * dt;\n      if (chance > Math.random()) {\n        //  Fire!\n        this.bombs.push(new Bomb(invader.x, invader.y + invader.height / 2, this.bombMinVelocity + Math.random() * (this.bombMaxVelocity - this.bombMinVelocity)));\n      }\n    }\n\n    //  Check for bomb/ship collisions.\n    for (let i = 0; i < this.bombs.length; i++) {\n      let bomb = this.bombs[i];\n      if (bomb.x >= this.ship.x - this.ship.width / 2 && bomb.x <= this.ship.x + this.ship.width / 2 && bomb.y >= this.ship.y - this.ship.height / 2 && bomb.y <= this.ship.y + this.ship.height / 2) {\n        this.bombs.splice(i--, 1);\n        game.lives--;\n        game.sounds.playSound('explosion');\n      }\n    }\n\n    //  Check for invader/ship collisions.\n    for (let i = 0; i < this.invaders.length; i++) {\n      let invader = this.invaders[i];\n      if (invader.x + invader.width / 2 > this.ship.x - this.ship.width / 2 && invader.x - invader.width / 2 < this.ship.x + this.ship.width / 2 && invader.y + invader.height / 2 > this.ship.y - this.ship.height / 2 && invader.y - invader.height / 2 < this.ship.y + this.ship.height / 2) {\n        //  Dead by collision!\n        game.lives = 0;\n        game.sounds.playSound('explosion');\n      }\n    }\n\n    //  Check for failure\n    if (game.lives <= 0) {\n      game.moveToState(new GameOverState());\n    }\n\n    //  Check for victory\n    if (this.invaders.length === 0) {\n      game.score += this.level * 50;\n      game.level += 1;\n      game.moveToState(new LevelIntroState(game.level));\n    }\n  }\n\n  draw(game, dt, ctx) {\n    //  Clear the background.\n    ctx.clearRect(0, 0, game.width, game.height);\n\n    //  Draw ship.\n    ctx.fillStyle = '#999999';\n    ctx.fillRect(this.ship.x - this.ship.width / 2, this.ship.y - this.ship.height / 2, this.ship.width, this.ship.height);\n\n    //  Draw invaders.\n    ctx.fillStyle = '#006600';\n    for (let i = 0; i < this.invaders.length; i++) {\n      let invader = this.invaders[i];\n      ctx.fillRect(invader.x - invader.width / 2, invader.y - invader.height / 2, invader.width, invader.height);\n    }\n\n    //  Draw bombs.\n    ctx.fillStyle = '#ff5555';\n    for (let i = 0; i < this.bombs.length; i++) {\n      let bomb = this.bombs[i];\n      ctx.fillRect(bomb.x - 2, bomb.y - 2, 4, 4);\n    }\n\n    //  Draw rockets.\n    ctx.fillStyle = '#ff0000';\n    for (let i = 0; i < this.rockets.length; i++) {\n      let rocket = this.rockets[i];\n      ctx.fillRect(rocket.x, rocket.y - 2, 1, 4);\n    }\n\n    //  Draw info.\n    let textYpos = game.gameBounds.bottom + (game.height - game.gameBounds.bottom) / 2 + 14 / 2;\n    ctx.font = \"14px Arial\";\n    ctx.fillStyle = '#ffffff';\n    let info = \"Lives: \" + game.lives;\n    ctx.textAlign = \"left\";\n    ctx.fillText(info, game.gameBounds.left, textYpos);\n    info = \"Score: \" + game.score + \", Level: \" + game.level;\n    ctx.textAlign = \"right\";\n    ctx.fillText(info, game.gameBounds.right, textYpos);\n\n    //  If we're in debug mode, draw bounds.\n    if (this.config.debugMode) {\n      ctx.strokeStyle = '#ff0000';\n      ctx.strokeRect(0, 0, game.width, game.height);\n      ctx.strokeRect(game.gameBounds.left, game.gameBounds.top, game.gameBounds.right - game.gameBounds.left, game.gameBounds.bottom - game.gameBounds.top);\n    }\n  }\n\n  keyDown(game, keyCode) {\n    if (keyCode == 32) {\n      //  Fire!\n      this.fireRocket();\n    }\n    if (keyCode == 80) {\n      //  Push the pause state.\n      game.pushState(new PauseState());\n    }\n  }\n\n  keyUp(game, keyCode) {}\n\n  fireRocket() {\n    //  If we have no last rocket time, or the last rocket time\n    //  is older than the max rocket rate, we can fire.\n    if (this.lastRocketTime === null || new Date().valueOf() - this.lastRocketTime > 1000 / this.config.rocketMaxFireRate) {\n      //  Add a rocket.\n      this.rockets.push(new Rocket(this.ship.x, this.ship.y - 12, this.config.rocketVelocity));\n      this.lastRocketTime = new Date().valueOf();\n\n      //  Play the 'shoot' sound.\n      game.sounds.playSound('shoot');\n    }\n  }\n}\n\nclass PauseState {\n  keyDown(game, keyCode) {\n\n    if (keyCode == 80) {\n      //  Pop the pause state.\n      game.popState();\n    }\n  }\n\n  draw(game, dt, ctx) {\n    //  Clear the background.\n    ctx.clearRect(0, 0, game.width, game.height);\n\n    ctx.font = \"14px Arial\";\n    ctx.fillStyle = '#ffffff';\n    ctx.textBaseline = \"middle\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Paused\", game.width / 2, game.height / 2);\n    return;\n  }\n}\n\n/*\nLevel Intro State\n\nThe Level Intro state shows a 'Level X' message and\na countdown for the level.\n*/\nclass LevelIntroState {\n  constructor(level) {\n    this.level = level;\n    this.countdownMessage = \"3\";\n  }\n\n  update(game, dt) {\n    //  Update the countdown.\n    if (this.countdown === undefined) {\n      this.countdown = 3; // countdown from 3 secs\n    }\n    this.countdown -= dt;\n\n    if (this.countdown < 2) {\n      this.countdownMessage = \"2\";\n    }\n    if (this.countdown < 1) {\n      this.countdownMessage = \"1\";\n    }\n    if (this.countdown <= 0) {\n      //  Move to the next level, popping this state.\n      game.moveToState(new PlayState(game.config, this.level));\n    }\n  }\n\n  draw(game, dt, ctx) {\n    //  Clear the background.\n    ctx.clearRect(0, 0, game.width, game.height);\n\n    ctx.font = \"36px Arial\";\n    ctx.fillStyle = '#ffffff';\n    ctx.textBaseline = \"middle\";\n    ctx.textAlign = \"center\";\n    ctx.fillText(\"Level \" + this.level, game.width / 2, game.height / 2);\n    ctx.font = \"24px Arial\";\n    ctx.fillText(\"Ready in \" + this.countdownMessage, game.width / 2, game.height / 2 + 36);\n    return;\n  }\n}\n\n/*\n\nShip\n\nThe ship has a position and that's about it.\n\n*/\nfunction Ship(x, y) {\n  this.x = x;\n  this.y = y;\n  this.width = 20;\n  this.height = 16;\n}\n\n/*\nRocket\n\nFired by the ship, they've got a position, velocity and state.\n\n*/\nfunction Rocket(x, y, velocity) {\n  this.x = x;\n  this.y = y;\n  this.velocity = velocity;\n}\n\n/*\nBomb\n\nDropped by invaders, they've got position, velocity.\n\n*/\nfunction Bomb(x, y, velocity) {\n  this.x = x;\n  this.y = y;\n  this.velocity = velocity;\n}\n\n/*\nInvader\n\nInvader's have position, type, rank/file and that's about it.\n*/\n\nfunction Invader(x, y, rank, file, type) {\n  this.x = x;\n  this.y = y;\n  this.rank = rank;\n  this.file = file;\n  this.type = type;\n  this.width = 18;\n  this.height = 14;\n}\n\n/*\nGame State\n\nA Game State is simply an update and draw proc.\nWhen a game is in the state, the update and draw procs are\ncalled, with a dt value (dt is delta time, i.e. the number)\nof seconds to update or draw).\n\n*/\nfunction GameState(updateProc, drawProc, keyDown, keyUp, enter, leave) {\n  this.updateProc = updateProc;\n  this.drawProc = drawProc;\n  this.keyDown = keyDown;\n  this.keyUp = keyUp;\n  this.enter = enter;\n  this.leave = leave;\n}\n\n/*\n\nSounds\n\nThe sounds class is used to asynchronously load sounds and allow\nthem to be played.\n\n*/\nclass Sounds {\n  constructor() {\n    //  The audio context.\n    this.audioContext = null;\n    //  The actual set of loaded sounds.\n    this.sounds = {};\n  }\n\n  init() {\n    //  Create the audio context, paying attention to webkit browsers.\n    let context = window.AudioContext || window.webkitAudioContext;\n    this.audioContext = new context();\n    this.mute = false;\n  }\n\n  loadSound(name, url) {\n    //  Reference to ourselves for closures.\n    let self = this;\n\n    //  Create an entry in the sounds object.\n    this.sounds[name] = null;\n\n    //  Create an asynchronous request for the sound.\n    let req = new XMLHttpRequest();\n    req.open('GET', url, true);\n    req.responseType = 'arraybuffer';\n    req.onload = function () {\n      self.audioContext.decodeAudioData(req.response, function (buffer) {\n        self.sounds[name] = { buffer: buffer };\n      });\n    };\n    try {\n      req.send();\n    } catch (e) {\n      console.log(\"An exception occured getting sound the sound \" + name + \" this might be \" + \"because the page is running from the file system, not a webserver.\");\n      console.log(e);\n    }\n  }\n\n  playSound(name) {\n    //  If we've not got the sound, don't bother playing it.\n    if (this.sounds[name] === undefined || this.sounds[name] === null || this.mute === true) {\n      return;\n    }\n\n    //  Create a sound source, set the buffer, connect to the speakers and\n    //  play the sound.\n    let source = this.audioContext.createBufferSource();\n    source.buffer = this.sounds[name].buffer;\n    source.connect(this.audioContext.destination);\n    source.start(0);\n  }\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9qcy9nYW1lLmpzPzIwNDEiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbnNwYWNlaW52YWRlcnMuanNcblxudGhlIGNvcmUgbG9naWMgZm9yIHRoZSBzcGFjZSBpbnZhZGVycyBnYW1lLlxuXG4qL1xuXG4vKlxuR2FtZSBDbGFzc1xuXG5UaGUgR2FtZSBjbGFzcyByZXByZXNlbnRzIGEgU3BhY2UgSW52YWRlcnMgZ2FtZS5cbkNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBpdCwgY2hhbmdlIGFueSBvZiB0aGUgZGVmYXVsdCB2YWx1ZXNcbmluIHRoZSBzZXR0aW5ncywgYW5kIGNhbGwgJ3N0YXJ0JyB0byBydW4gdGhlIGdhbWUuXG5cbkNhbGwgJ2luaXRpYWxpc2UnIGJlZm9yZSAnc3RhcnQnIHRvIHNldCB0aGUgY2FudmFzIHRoZSBnYW1lXG53aWxsIGRyYXcgdG8uXG5cbkNhbGwgJ21vdmVTaGlwJyBvciAnc2hpcEZpcmUnIHRvIGNvbnRyb2wgdGhlIHNoaXAuXG5cbkxpc3RlbiBmb3IgJ2dhbWVXb24nIG9yICdnYW1lTG9zdCcgZXZlbnRzIHRvIGhhbmRsZSB0aGUgZ2FtZVxuZW5kaW5nLlxuKi9cblxuLy8gIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIEdhbWUgY2xhc3MuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcbiAgY29uc3RydWN0b3IoZ2FtZUNhbnZhcykge1xuICAgIC8vICBTZXQgdGhlIGluaXRpYWwgY29uZmlnLlxuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgYm9tYlJhdGU6IDAuMDUsXG4gICAgICBib21iTWluVmVsb2NpdHk6IDUwLFxuICAgICAgYm9tYk1heFZlbG9jaXR5OiA1MCxcbiAgICAgIGludmFkZXJJbml0aWFsVmVsb2NpdHk6IDI1LFxuICAgICAgaW52YWRlckFjY2VsZXJhdGlvbjogMCxcbiAgICAgIGludmFkZXJEcm9wRGlzdGFuY2U6IDIwLFxuICAgICAgcm9ja2V0VmVsb2NpdHk6IDEyMCxcbiAgICAgIHJvY2tldE1heEZpcmVSYXRlOiAyLFxuICAgICAgZ2FtZVdpZHRoOiA0MDAsXG4gICAgICBnYW1lSGVpZ2h0OiAzMDAsXG4gICAgICBmcHM6IDUwLFxuICAgICAgZGVidWdNb2RlOiBmYWxzZSxcbiAgICAgIGludmFkZXJSYW5rczogNSxcbiAgICAgIGludmFkZXJGaWxlczogMTAsXG4gICAgICBzaGlwU3BlZWQ6IDEyMCxcbiAgICAgIGxldmVsRGlmZmljdWx0eU11bHRpcGxpZXI6IDAuMixcbiAgICAgIHBvaW50c1BlckludmFkZXI6IDVcbiAgICB9XG5cbiAgICAvLyAgQWxsIHN0YXRlIGlzIGluIHRoZSB2YXJpYWJsZXMgYmVsb3cuXG4gICAgdGhpcy5saXZlcyA9IDM7XG4gICAgdGhpcy53aWR0aCA9IGdhbWVDYW52YXMud2lkdGhcbiAgICB0aGlzLmhlaWdodCA9IGdhbWVDYW52YXMuaGVpZ2h0XG4gICAgdGhpcy5nYW1lQm91bmRzID0ge1xuICAgICAgbGVmdDogZ2FtZUNhbnZhcy53aWR0aCAvIDIgLSB0aGlzLmNvbmZpZy5nYW1lV2lkdGggLyAyLFxuICAgICAgcmlnaHQ6IGdhbWVDYW52YXMud2lkdGggLyAyICsgdGhpcy5jb25maWcuZ2FtZVdpZHRoIC8gMixcbiAgICAgIHRvcDogZ2FtZUNhbnZhcy5oZWlnaHQgLyAyIC0gdGhpcy5jb25maWcuZ2FtZUhlaWdodCAvIDIsXG4gICAgICBib3R0b206IGdhbWVDYW52YXMuaGVpZ2h0IC8gMiArIHRoaXMuY29uZmlnLmdhbWVIZWlnaHQgLyAyLFxuICAgIH1cbiAgICB0aGlzLmludGVydmFsSWQgPSAwO1xuICAgIHRoaXMuc2NvcmUgPSAwO1xuICAgIHRoaXMubGV2ZWwgPSAxO1xuXG4gICAgLy8gIFRoZSBzdGF0ZSBzdGFjay5cbiAgICB0aGlzLnN0YXRlU3RhY2sgPSBbXTtcblxuICAgIC8vICBJbnB1dC9vdXRwdXRcbiAgICB0aGlzLnByZXNzZWRLZXlzID0ge307XG4gICAgdGhpcy5nYW1lQ2FudmFzID0gZ2FtZUNhbnZhc1xuXG4gICAgLy8gIEFsbCBzb3VuZHMuXG4gICAgdGhpcy5zb3VuZHMgPSBudWxsXG4gIH1cblxuICBtb3ZlVG9TdGF0ZShzdGF0ZSkge1xuICAgIC8vICBJZiB3ZSBhcmUgaW4gYSBzdGF0ZSwgbGVhdmUgaXQuXG4gICAgaWYgKHRoaXMuY3VycmVudFN0YXRlKCkgJiYgdGhpcy5jdXJyZW50U3RhdGUoKS5sZWF2ZSkge1xuICAgICAgdGhpcy5jdXJyZW50U3RhdGUoKS5sZWF2ZShnYW1lKTtcbiAgICAgIHRoaXMuc3RhdGVTdGFjay5wb3AoKTtcbiAgICB9XG4gICAgLy8gIElmIHRoZXJlJ3MgYW4gZW50ZXIgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3RhdGUsIGNhbGwgaXQuXG4gICAgaWYoc3RhdGUuZW50ZXIpIHtcbiAgICAgIHN0YXRlLmVudGVyKHRoaXMpO1xuICAgIH1cblxuICAgIC8vICBTZXQgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgdGhpcy5zdGF0ZVN0YWNrLnBvcCgpO1xuICAgIHRoaXMuc3RhdGVTdGFjay5wdXNoKHN0YXRlKTtcbiAgfVxuXG4gIC8vICBTdGFydCB0aGUgR2FtZS5cbiAgc3RhcnQoKSB7XG4gICAgLy8gIE1vdmUgaW50byB0aGUgJ3dlbGNvbWUnIHN0YXRlLlxuICAgIHRoaXMubW92ZVRvU3RhdGUobmV3IFdlbGNvbWVTdGF0ZSgpKVxuXG4gICAgLy8gIFNldCB0aGUgZ2FtZSB2YXJpYWJsZXMuXG4gICAgdGhpcy5saXZlcyA9IDNcbiAgICB0aGlzLmNvbmZpZy5kZWJ1Z01vZGUgPSAvZGVidWc9dHJ1ZS8udGVzdCh3aW5kb3cubG9jYXRpb24uaHJlZilcbiAgICAvLyAgU3RhcnQgdGhlIGdhbWUgbG9vcC5cbiAgICB0aGlzLmludGVydmFsSWQgPSBzZXRJbnRlcnZhbChcbiAgICAgICgpID0+IHsgR2FtZUxvb3AodGhpcykgfSxcbiAgICAgIDEwMDAgLyB0aGlzLmNvbmZpZy5mcHNcbiAgICApXG4gIH1cblxuICAvLyAgUmV0dXJucyB0aGUgY3VycmVudCBzdGF0ZS5cbiAgY3VycmVudFN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlU3RhY2subGVuZ3RoID4gMCA/IHRoaXMuc3RhdGVTdGFja1t0aGlzLnN0YXRlU3RhY2subGVuZ3RoIC0gMV0gOiBudWxsO1xuICB9XG5cbiAgLy8gIE11dGVzIG9yIHVubXV0ZXMgdGhlIGdhbWUuXG4gIG11dGUobXV0ZSkge1xuICAgIC8vICBJZiB3ZSd2ZSBiZWVuIHRvbGQgdG8gbXV0ZSwgbXV0ZS5cbiAgICBpZihtdXRlID09PSB0cnVlKSB7XG4gICAgICB0aGlzLnNvdW5kcy5tdXRlID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG11dGUgPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnNvdW5kcy5tdXRlID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRvZ2dsZSBtdXRlIGluc3RlYWQuLi5cbiAgICAgIHRoaXMuc291bmRzLm11dGUgPSB0aGlzLnNvdW5kcy5tdXRlID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHB1c2hTdGF0ZShzdGF0ZSkge1xuICAgIC8vICBJZiB0aGVyZSdzIGFuIGVudGVyIGZ1bmN0aW9uIGZvciB0aGUgbmV3IHN0YXRlLCBjYWxsIGl0LlxuICAgIGlmKHN0YXRlLmVudGVyKSB7XG4gICAgICBzdGF0ZS5lbnRlcihnYW1lKTtcbiAgICB9XG4gICAgLy8gIFNldCB0aGUgY3VycmVudCBzdGF0ZS5cbiAgICB0aGlzLnN0YXRlU3RhY2sucHVzaChzdGF0ZSk7XG4gIH1cblxuICBwb3BTdGF0ZSgpIHtcbiAgICAvLyAgTGVhdmUgYW5kIHBvcCB0aGUgc3RhdGUuXG4gICAgaWYodGhpcy5jdXJyZW50U3RhdGUoKSkge1xuICAgICAgaWYodGhpcy5jdXJyZW50U3RhdGUoKS5sZWF2ZSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSgpLmxlYXZlKGdhbWUpXG4gICAgICB9XG5cbiAgICAgIC8vICBTZXQgdGhlIGN1cnJlbnQgc3RhdGUuXG4gICAgICB0aGlzLnN0YXRlU3RhY2sucG9wKClcbiAgICB9XG4gIH1cblxuICAvLyAgVGhlIHN0b3AgZnVuY3Rpb24gc3RvcHMgdGhlIGdhbWUuXG4gIHN0b3AoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpXG4gIH1cblxuICAvLyAgSW5mb3JtIHRoZSBnYW1lIGEga2V5IGlzIGRvd24uXG4gIGtleURvd24oa2V5Q29kZSkge1xuICAgIHRoaXMucHJlc3NlZEtleXNba2V5Q29kZV0gPSB0cnVlO1xuICAgIC8vICBEZWxlZ2F0ZSB0byB0aGUgY3VycmVudCBzdGF0ZSB0b28uXG4gICAgaWYgKHRoaXMuY3VycmVudFN0YXRlKCkgJiYgdGhpcy5jdXJyZW50U3RhdGUoKS5rZXlEb3duKSB7XG4gICAgICB0aGlzLmN1cnJlbnRTdGF0ZSgpLmtleURvd24odGhpcywga2V5Q29kZSk7XG4gICAgfVxuICB9O1xuXG4gIC8vICBJbmZvcm0gdGhlIGdhbWUgYSBrZXkgaXMgdXAuXG4gIGtleVVwKGtleUNvZGUpIHtcbiAgICBkZWxldGUgdGhpcy5wcmVzc2VkS2V5c1trZXlDb2RlXTtcbiAgICAvLyAgRGVsZWdhdGUgdG8gdGhlIGN1cnJlbnQgc3RhdGUgdG9vLlxuICAgIGlmKHRoaXMuY3VycmVudFN0YXRlKCkgJiYgdGhpcy5jdXJyZW50U3RhdGUoKS5rZXlVcCkge1xuICAgICAgdGhpcy5jdXJyZW50U3RhdGUoKS5rZXlVcCh0aGlzLCBrZXlDb2RlKTtcbiAgICB9XG4gIH07XG59XG5cbi8vICBUaGUgbWFpbiBsb29wLlxuZnVuY3Rpb24gR2FtZUxvb3AoZ2FtZSkge1xuICBsZXQgY3VycmVudFN0YXRlID0gZ2FtZS5jdXJyZW50U3RhdGUoKTtcbiAgaWYoY3VycmVudFN0YXRlKSB7XG5cbiAgICAvLyAgRGVsdGEgdCBpcyB0aGUgdGltZSB0byB1cGRhdGUvZHJhdy5cbiAgICBsZXQgZHQgPSAxIC8gZ2FtZS5jb25maWcuZnBzO1xuXG4gICAgLy8gIEdldCB0aGUgZHJhd2luZyBjb250ZXh0LlxuICAgIGxldCBjdHggPSBnYW1lLmdhbWVDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgLy8gIFVwZGF0ZSBpZiB3ZSBoYXZlIGFuIHVwZGF0ZSBmdW5jdGlvbi4gQWxzbyBkcmF3XG4gICAgLy8gIGlmIHdlIGhhdmUgYSBkcmF3IGZ1bmN0aW9uLlxuICAgIGlmKGN1cnJlbnRTdGF0ZS51cGRhdGUpIHtcbiAgICAgIGN1cnJlbnRTdGF0ZS51cGRhdGUoZ2FtZSwgZHQpO1xuICAgIH1cbiAgICBpZihjdXJyZW50U3RhdGUuZHJhdykge1xuICAgICAgY3VycmVudFN0YXRlLmRyYXcoZ2FtZSwgZHQsIGN0eCk7XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIFdlbGNvbWVTdGF0ZSB7XG4gIGVudGVyKGdhbWUpIHtcbiAgICAvLyBDcmVhdGUgYW5kIGxvYWQgdGhlIHNvdW5kcy5cbiAgICBnYW1lLnNvdW5kcyA9IG5ldyBTb3VuZHMoKTtcbiAgICBnYW1lLnNvdW5kcy5pbml0KCk7XG4gICAgZ2FtZS5zb3VuZHMubG9hZFNvdW5kKCdzaG9vdCcsICdzb3VuZHMvc2hvb3Qud2F2Jyk7XG4gICAgZ2FtZS5zb3VuZHMubG9hZFNvdW5kKCdiYW5nJywgJ3NvdW5kcy9iYW5nLndhdicpO1xuICAgIGdhbWUuc291bmRzLmxvYWRTb3VuZCgnZXhwbG9zaW9uJywgJ3NvdW5kcy9leHBsb3Npb24ud2F2Jyk7XG4gIH1cblxuICB1cGRhdGUgKGdhbWUsIGR0KSB7IH1cblxuICBkcmF3KGdhbWUsIGR0LCBjdHgpIHtcbiAgICAvLyAgQ2xlYXIgdGhlIGJhY2tncm91bmQuXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBnYW1lLndpZHRoLCBnYW1lLmhlaWdodCk7XG5cbiAgICBjdHguZm9udD1cIjMwcHggQXJpYWxcIjtcbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnO1xuICAgIGN0eC50ZXh0QmFzZWxpbmU9XCJjZW50ZXJcIjtcbiAgICBjdHgudGV4dEFsaWduPVwiY2VudGVyXCI7XG4gICAgY3R4LmZpbGxUZXh0KFwiU3BhY2UgSW52YWRlcnNcIiwgZ2FtZS53aWR0aCAvIDIsIGdhbWUuaGVpZ2h0LzIgLSA0MCk7XG4gICAgY3R4LmZvbnQ9XCIxNnB4IEFyaWFsXCI7XG5cbiAgICBjdHguZmlsbFRleHQoXCJQcmVzcyAnU3BhY2UnIHRvIHN0YXJ0LlwiLCBnYW1lLndpZHRoIC8gMiwgZ2FtZS5oZWlnaHQvMik7XG4gIH1cblxuICBrZXlEb3duKGdhbWUsIGtleUNvZGUpIHtcbiAgICBpZihrZXlDb2RlID09IDMyKSAvKnNwYWNlKi8ge1xuICAgICAgLy8gIFNwYWNlIHN0YXJ0cyB0aGUgZ2FtZS5cbiAgICAgIGdhbWUubGV2ZWwgPSAxO1xuICAgICAgZ2FtZS5zY29yZSA9IDA7XG4gICAgICBnYW1lLmxpdmVzID0gMztcbiAgICAgIGdhbWUubW92ZVRvU3RhdGUobmV3IExldmVsSW50cm9TdGF0ZShnYW1lLmxldmVsKSk7XG4gICAgfVxuICB9XG59XG5cblxuY2xhc3MgR2FtZU92ZXJTdGF0ZSB7XG4gIHVwZGF0ZShnYW1lLCBkdCkgeyB9XG5cbiAgZHJhdyhnYW1lLCBkdCwgY3R4KSB7XG4gICAgLy8gIENsZWFyIHRoZSBiYWNrZ3JvdW5kLlxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZS53aWR0aCwgZ2FtZS5oZWlnaHQpO1xuXG4gICAgY3R4LmZvbnQ9XCIzMHB4IEFyaWFsXCI7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmZmZmJztcbiAgICBjdHgudGV4dEJhc2VsaW5lPVwiY2VudGVyXCI7XG4gICAgY3R4LnRleHRBbGlnbj1cImNlbnRlclwiO1xuICAgIGN0eC5maWxsVGV4dChcIkdhbWUgT3ZlciFcIiwgZ2FtZS53aWR0aCAvIDIsIGdhbWUuaGVpZ2h0LzIgLSA0MCk7XG4gICAgY3R4LmZvbnQ9XCIxNnB4IEFyaWFsXCI7XG4gICAgY3R4LmZpbGxUZXh0KFwiWW91IHNjb3JlZCBcIiArIGdhbWUuc2NvcmUgKyBcIiBhbmQgZ290IHRvIGxldmVsIFwiICsgZ2FtZS5sZXZlbCwgZ2FtZS53aWR0aCAvIDIsIGdhbWUuaGVpZ2h0LzIpO1xuICAgIGN0eC5mb250PVwiMTZweCBBcmlhbFwiO1xuICAgIGN0eC5maWxsVGV4dChcIlByZXNzICdTcGFjZScgdG8gcGxheSBhZ2Fpbi5cIiwgZ2FtZS53aWR0aCAvIDIsIGdhbWUuaGVpZ2h0LzIgKyA0MCk7XG4gIH1cblxuICBrZXlEb3duKGdhbWUsIGtleUNvZGUpIHtcbiAgICBpZihrZXlDb2RlID09IDMyKSAvKnNwYWNlKi8ge1xuICAgICAgLy8gIFNwYWNlIHJlc3RhcnRzIHRoZSBnYW1lLlxuICAgICAgZ2FtZS5saXZlcyA9IDM7XG4gICAgICBnYW1lLnNjb3JlID0gMDtcbiAgICAgIGdhbWUubGV2ZWwgPSAxO1xuICAgICAgZ2FtZS5tb3ZlVG9TdGF0ZShuZXcgTGV2ZWxJbnRyb1N0YXRlKDEpKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gIENyZWF0ZSBhIFBsYXlTdGF0ZSB3aXRoIHRoZSBnYW1lIGNvbmZpZyBhbmQgdGhlIGxldmVsIHlvdSBhcmUgb24uXG5jbGFzcyBQbGF5U3RhdGUge1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGxldmVsKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgdGhpcy5sZXZlbCA9IGxldmVsO1xuXG4gICAgLy8gIEdhbWUgc3RhdGUuXG4gICAgdGhpcy5pbnZhZGVyQ3VycmVudFZlbG9jaXR5ID0gIDEwO1xuICAgIHRoaXMuaW52YWRlckN1cnJlbnREcm9wRGlzdGFuY2UgPSAgMDtcbiAgICB0aGlzLmludmFkZXJzQXJlRHJvcHBpbmcgPSAgZmFsc2U7XG4gICAgdGhpcy5sYXN0Um9ja2V0VGltZSA9IG51bGw7XG5cbiAgICAvLyAgR2FtZSBlbnRpdGllcy5cbiAgICB0aGlzLnNoaXAgPSBudWxsO1xuICAgIHRoaXMuaW52YWRlcnMgPSBbXTtcbiAgICB0aGlzLnJvY2tldHMgPSBbXTtcbiAgICB0aGlzLmJvbWJzID0gW107XG4gIH1cblxuICBlbnRlcihnYW1lKSB7XG4gICAgLy8gIENyZWF0ZSB0aGUgc2hpcC5cbiAgICB0aGlzLnNoaXAgPSBuZXcgU2hpcChnYW1lLndpZHRoIC8gMiwgZ2FtZS5nYW1lQm91bmRzLmJvdHRvbSk7XG5cbiAgICAvLyAgU2V0dXAgaW5pdGlhbCBzdGF0ZS5cbiAgICB0aGlzLmludmFkZXJDdXJyZW50VmVsb2NpdHkgPSAgMTA7XG4gICAgdGhpcy5pbnZhZGVyQ3VycmVudERyb3BEaXN0YW5jZSA9ICAwO1xuICAgIHRoaXMuaW52YWRlcnNBcmVEcm9wcGluZyA9ICBmYWxzZTtcblxuICAgIC8vICBTZXQgdGhlIHNoaXAgc3BlZWQgZm9yIHRoaXMgbGV2ZWwsIGFzIHdlbGwgYXMgaW52YWRlciBwYXJhbXMuXG4gICAgbGV0IGxldmVsTXVsdGlwbGllciA9IHRoaXMubGV2ZWwgKiB0aGlzLmNvbmZpZy5sZXZlbERpZmZpY3VsdHlNdWx0aXBsaWVyO1xuICAgIHRoaXMuc2hpcFNwZWVkID0gdGhpcy5jb25maWcuc2hpcFNwZWVkO1xuICAgIHRoaXMuaW52YWRlckluaXRpYWxWZWxvY2l0eSA9IHRoaXMuY29uZmlnLmludmFkZXJJbml0aWFsVmVsb2NpdHkgKyAobGV2ZWxNdWx0aXBsaWVyICogdGhpcy5jb25maWcuaW52YWRlckluaXRpYWxWZWxvY2l0eSk7XG4gICAgdGhpcy5ib21iUmF0ZSA9IHRoaXMuY29uZmlnLmJvbWJSYXRlICsgKGxldmVsTXVsdGlwbGllciAqIHRoaXMuY29uZmlnLmJvbWJSYXRlKTtcbiAgICB0aGlzLmJvbWJNaW5WZWxvY2l0eSA9IHRoaXMuY29uZmlnLmJvbWJNaW5WZWxvY2l0eSArIChsZXZlbE11bHRpcGxpZXIgKiB0aGlzLmNvbmZpZy5ib21iTWluVmVsb2NpdHkpO1xuICAgIHRoaXMuYm9tYk1heFZlbG9jaXR5ID0gdGhpcy5jb25maWcuYm9tYk1heFZlbG9jaXR5ICsgKGxldmVsTXVsdGlwbGllciAqIHRoaXMuY29uZmlnLmJvbWJNYXhWZWxvY2l0eSk7XG5cbiAgICAvLyAgQ3JlYXRlIHRoZSBpbnZhZGVycy5cbiAgICBsZXQgcmFua3MgPSB0aGlzLmNvbmZpZy5pbnZhZGVyUmFua3M7XG4gICAgbGV0IGZpbGVzID0gdGhpcy5jb25maWcuaW52YWRlckZpbGVzO1xuICAgIGxldCBpbnZhZGVycyA9IFtdO1xuICAgIGZvcihsZXQgcmFuayA9IDA7IHJhbmsgPCByYW5rczsgcmFuaysrKXtcbiAgICAgIGZvcihsZXQgZmlsZSA9IDA7IGZpbGUgPCBmaWxlczsgZmlsZSsrKSB7XG4gICAgICAgIGludmFkZXJzLnB1c2gobmV3IEludmFkZXIoXG4gICAgICAgICAgKGdhbWUud2lkdGggLyAyKSArICgoZmlsZXMvMiAtIGZpbGUpICogMjAwIC8gZmlsZXMpLFxuICAgICAgICAgIChnYW1lLmdhbWVCb3VuZHMudG9wICsgcmFuayAqIDIwKSxcbiAgICAgICAgICByYW5rLCBmaWxlLCAnSW52YWRlcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbnZhZGVycyA9IGludmFkZXJzO1xuICAgIHRoaXMuaW52YWRlckN1cnJlbnRWZWxvY2l0eSA9IHRoaXMuaW52YWRlckluaXRpYWxWZWxvY2l0eTtcbiAgICB0aGlzLmludmFkZXJWZWxvY2l0eSA9IHt4OiAtdGhpcy5pbnZhZGVySW5pdGlhbFZlbG9jaXR5LCB5OjB9O1xuICAgIHRoaXMuaW52YWRlck5leHRWZWxvY2l0eSA9IG51bGw7XG4gIH1cblxuICB1cGRhdGUoZ2FtZSwgZHQpIHtcbiAgICAvLyAgSWYgdGhlIGxlZnQgb3IgcmlnaHQgYXJyb3cga2V5cyBhcmUgcHJlc3NlZCwgbW92ZVxuICAgIC8vICB0aGUgc2hpcC4gQ2hlY2sgdGhpcyBvbiB0aWNrcyByYXRoZXIgdGhhbiB2aWEgYSBrZXlkb3duXG4gICAgLy8gIGV2ZW50IGZvciBzbW9vdGggbW92ZW1lbnQsIG90aGVyd2lzZSB0aGUgc2hpcCB3b3VsZCBtb3ZlXG4gICAgLy8gIG1vcmUgbGlrZSBhIHRleHQgZWRpdG9yIGNhcmV0LlxuICAgIGlmKGdhbWUucHJlc3NlZEtleXNbMzddKSB7XG4gICAgICB0aGlzLnNoaXAueCAtPSB0aGlzLnNoaXBTcGVlZCAqIGR0O1xuICAgIH1cbiAgICBpZihnYW1lLnByZXNzZWRLZXlzWzM5XSkge1xuICAgICAgdGhpcy5zaGlwLnggKz0gdGhpcy5zaGlwU3BlZWQgKiBkdDtcbiAgICB9XG4gICAgaWYoZ2FtZS5wcmVzc2VkS2V5c1szMl0pIHtcbiAgICAgIHRoaXMuZmlyZVJvY2tldCgpO1xuICAgIH1cblxuICAgIC8vICBLZWVwIHRoZSBzaGlwIGluIGJvdW5kcy5cbiAgICBpZih0aGlzLnNoaXAueCA8IGdhbWUuZ2FtZUJvdW5kcy5sZWZ0KSB7XG4gICAgICB0aGlzLnNoaXAueCA9IGdhbWUuZ2FtZUJvdW5kcy5sZWZ0O1xuICAgIH1cbiAgICBpZih0aGlzLnNoaXAueCA+IGdhbWUuZ2FtZUJvdW5kcy5yaWdodCkge1xuICAgICAgdGhpcy5zaGlwLnggPSBnYW1lLmdhbWVCb3VuZHMucmlnaHQ7XG4gICAgfVxuXG4gICAgLy8gIE1vdmUgZWFjaCBib21iLlxuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuYm9tYnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBib21iID0gdGhpcy5ib21ic1tpXTtcbiAgICAgIGJvbWIueSArPSBkdCAqIGJvbWIudmVsb2NpdHk7XG5cbiAgICAgIC8vICBJZiB0aGUgcm9ja2V0IGhhcyBnb25lIG9mZiB0aGUgc2NyZWVuIHJlbW92ZSBpdC5cbiAgICAgIGlmKGJvbWIueSA+IHRoaXMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuYm9tYnMuc3BsaWNlKGktLSwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIE1vdmUgZWFjaCByb2NrZXQuXG4gICAgZm9yKGxldCBpPTA7IGk8dGhpcy5yb2NrZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgcm9ja2V0ID0gdGhpcy5yb2NrZXRzW2ldO1xuICAgICAgcm9ja2V0LnkgLT0gZHQgKiByb2NrZXQudmVsb2NpdHk7XG5cbiAgICAgIC8vICBJZiB0aGUgcm9ja2V0IGhhcyBnb25lIG9mZiB0aGUgc2NyZWVuIHJlbW92ZSBpdC5cbiAgICAgIGlmKHJvY2tldC55IDwgMCkge1xuICAgICAgICB0aGlzLnJvY2tldHMuc3BsaWNlKGktLSwgMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIE1vdmUgdGhlIGludmFkZXJzLlxuICAgIGxldCBoaXRMZWZ0ID0gZmFsc2UsIGhpdFJpZ2h0ID0gZmFsc2UsIGhpdEJvdHRvbSA9IGZhbHNlO1xuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuaW52YWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpbnZhZGVyID0gdGhpcy5pbnZhZGVyc1tpXTtcbiAgICAgIGxldCBuZXd4ID0gaW52YWRlci54ICsgdGhpcy5pbnZhZGVyVmVsb2NpdHkueCAqIGR0O1xuICAgICAgbGV0IG5ld3kgPSBpbnZhZGVyLnkgKyB0aGlzLmludmFkZXJWZWxvY2l0eS55ICogZHQ7XG4gICAgICBpZihoaXRMZWZ0ID09IGZhbHNlICYmIG5ld3ggPCBnYW1lLmdhbWVCb3VuZHMubGVmdCkge1xuICAgICAgICBoaXRMZWZ0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYoaGl0UmlnaHQgPT0gZmFsc2UgJiYgbmV3eCA+IGdhbWUuZ2FtZUJvdW5kcy5yaWdodCkge1xuICAgICAgICBoaXRSaWdodCA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmKGhpdEJvdHRvbSA9PSBmYWxzZSAmJiBuZXd5ID4gZ2FtZS5nYW1lQm91bmRzLmJvdHRvbSkge1xuICAgICAgICBoaXRCb3R0b20gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZighaGl0TGVmdCAmJiAhaGl0UmlnaHQgJiYgIWhpdEJvdHRvbSkge1xuICAgICAgICBpbnZhZGVyLnggPSBuZXd4O1xuICAgICAgICBpbnZhZGVyLnkgPSBuZXd5O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vICBVcGRhdGUgaW52YWRlciB2ZWxvY2l0aWVzLlxuICAgIGlmKHRoaXMuaW52YWRlcnNBcmVEcm9wcGluZykge1xuICAgICAgdGhpcy5pbnZhZGVyQ3VycmVudERyb3BEaXN0YW5jZSArPSB0aGlzLmludmFkZXJWZWxvY2l0eS55ICogZHQ7XG4gICAgICBpZih0aGlzLmludmFkZXJDdXJyZW50RHJvcERpc3RhbmNlID49IHRoaXMuY29uZmlnLmludmFkZXJEcm9wRGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5pbnZhZGVyc0FyZURyb3BwaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW52YWRlclZlbG9jaXR5ID0gdGhpcy5pbnZhZGVyTmV4dFZlbG9jaXR5O1xuICAgICAgICB0aGlzLmludmFkZXJDdXJyZW50RHJvcERpc3RhbmNlID0gMDtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gIElmIHdlJ3ZlIGhpdCB0aGUgbGVmdCwgbW92ZSBkb3duIHRoZW4gcmlnaHQuXG4gICAgaWYoaGl0TGVmdCkge1xuICAgICAgdGhpcy5pbnZhZGVyQ3VycmVudFZlbG9jaXR5ICs9IHRoaXMuY29uZmlnLmludmFkZXJBY2NlbGVyYXRpb247XG4gICAgICB0aGlzLmludmFkZXJWZWxvY2l0eSA9IHt4OiAwLCB5OnRoaXMuaW52YWRlckN1cnJlbnRWZWxvY2l0eSB9O1xuICAgICAgdGhpcy5pbnZhZGVyc0FyZURyb3BwaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW52YWRlck5leHRWZWxvY2l0eSA9IHt4OiB0aGlzLmludmFkZXJDdXJyZW50VmVsb2NpdHkgLCB5OjB9O1xuICAgIH1cbiAgICAvLyAgSWYgd2UndmUgaGl0IHRoZSByaWdodCwgbW92ZSBkb3duIHRoZW4gbGVmdC5cbiAgICBpZihoaXRSaWdodCkge1xuICAgICAgdGhpcy5pbnZhZGVyQ3VycmVudFZlbG9jaXR5ICs9IHRoaXMuY29uZmlnLmludmFkZXJBY2NlbGVyYXRpb247XG4gICAgICB0aGlzLmludmFkZXJWZWxvY2l0eSA9IHt4OiAwLCB5OnRoaXMuaW52YWRlckN1cnJlbnRWZWxvY2l0eSB9O1xuICAgICAgdGhpcy5pbnZhZGVyc0FyZURyb3BwaW5nID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW52YWRlck5leHRWZWxvY2l0eSA9IHt4OiAtdGhpcy5pbnZhZGVyQ3VycmVudFZlbG9jaXR5ICwgeTowfTtcbiAgICB9XG4gICAgLy8gIElmIHdlJ3ZlIGhpdCB0aGUgYm90dG9tLCBpdCdzIGdhbWUgb3Zlci5cbiAgICBpZihoaXRCb3R0b20pIHtcbiAgICAgIHRoaXMubGl2ZXMgPSAwO1xuICAgIH1cblxuICAgIC8vICBDaGVjayBmb3Igcm9ja2V0L2ludmFkZXIgY29sbGlzaW9ucy5cbiAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmludmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW52YWRlciA9IHRoaXMuaW52YWRlcnNbaV07XG4gICAgICBsZXQgYmFuZyA9IGZhbHNlO1xuXG4gICAgICBmb3IobGV0IGo9MDsgajx0aGlzLnJvY2tldHMubGVuZ3RoOyBqKyspe1xuICAgICAgICBsZXQgcm9ja2V0ID0gdGhpcy5yb2NrZXRzW2pdO1xuXG4gICAgICAgIGlmKHJvY2tldC54ID49IChpbnZhZGVyLnggLSBpbnZhZGVyLndpZHRoLzIpICYmIHJvY2tldC54IDw9IChpbnZhZGVyLnggKyBpbnZhZGVyLndpZHRoLzIpICYmXG4gICAgICAgIHJvY2tldC55ID49IChpbnZhZGVyLnkgLSBpbnZhZGVyLmhlaWdodC8yKSAmJiByb2NrZXQueSA8PSAoaW52YWRlci55ICsgaW52YWRlci5oZWlnaHQvMikpIHtcblxuICAgICAgICAgIC8vICBSZW1vdmUgdGhlIHJvY2tldCwgc2V0ICdiYW5nJyBzbyB3ZSBkb24ndCBwcm9jZXNzXG4gICAgICAgICAgLy8gIHRoaXMgcm9ja2V0IGFnYWluLlxuICAgICAgICAgIHRoaXMucm9ja2V0cy5zcGxpY2Uoai0tLCAxKTtcbiAgICAgICAgICBiYW5nID0gdHJ1ZTtcbiAgICAgICAgICBnYW1lLnNjb3JlICs9IHRoaXMuY29uZmlnLnBvaW50c1BlckludmFkZXI7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKGJhbmcpIHtcbiAgICAgICAgdGhpcy5pbnZhZGVycy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgZ2FtZS5zb3VuZHMucGxheVNvdW5kKCdiYW5nJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIEZpbmQgYWxsIG9mIHRoZSBmcm9udCByYW5rIGludmFkZXJzLlxuICAgIGxldCBmcm9udFJhbmtJbnZhZGVycyA9IHt9O1xuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMuaW52YWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBpbnZhZGVyID0gdGhpcy5pbnZhZGVyc1tpXTtcbiAgICAgIC8vICBJZiB3ZSBoYXZlIG5vIGludmFkZXIgZm9yIGdhbWUgZmlsZSwgb3IgdGhlIGludmFkZXJcbiAgICAgIC8vICBmb3IgZ2FtZSBmaWxlIGlzIGZ1dGhlciBiZWhpbmQsIHNldCB0aGUgZnJvbnRcbiAgICAgIC8vICByYW5rIGludmFkZXIgdG8gZ2FtZSBvbmUuXG4gICAgICBpZighZnJvbnRSYW5rSW52YWRlcnNbaW52YWRlci5maWxlXSB8fCBmcm9udFJhbmtJbnZhZGVyc1tpbnZhZGVyLmZpbGVdLnJhbmsgPCBpbnZhZGVyLnJhbmspIHtcbiAgICAgICAgZnJvbnRSYW5rSW52YWRlcnNbaW52YWRlci5maWxlXSA9IGludmFkZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIEdpdmUgZWFjaCBmcm9udCByYW5rIGludmFkZXIgYSBjaGFuY2UgdG8gZHJvcCBhIGJvbWIuXG4gICAgZm9yKGxldCBpPTA7IGk8dGhpcy5jb25maWcuaW52YWRlckZpbGVzOyBpKyspIHtcbiAgICAgIGxldCBpbnZhZGVyID0gZnJvbnRSYW5rSW52YWRlcnNbaV07XG4gICAgICBpZighaW52YWRlcikgY29udGludWU7XG4gICAgICBsZXQgY2hhbmNlID0gdGhpcy5ib21iUmF0ZSAqIGR0O1xuICAgICAgaWYoY2hhbmNlID4gTWF0aC5yYW5kb20oKSkge1xuICAgICAgICAvLyAgRmlyZSFcbiAgICAgICAgdGhpcy5ib21icy5wdXNoKG5ldyBCb21iKGludmFkZXIueCwgaW52YWRlci55ICsgaW52YWRlci5oZWlnaHQgLyAyLCB0aGlzLmJvbWJNaW5WZWxvY2l0eSArIE1hdGgucmFuZG9tKCkqKHRoaXMuYm9tYk1heFZlbG9jaXR5IC0gdGhpcy5ib21iTWluVmVsb2NpdHkpKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIENoZWNrIGZvciBib21iL3NoaXAgY29sbGlzaW9ucy5cbiAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmJvbWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYm9tYiA9IHRoaXMuYm9tYnNbaV07XG4gICAgICBpZihib21iLnggPj0gKHRoaXMuc2hpcC54IC0gdGhpcy5zaGlwLndpZHRoLzIpICYmIGJvbWIueCA8PSAodGhpcy5zaGlwLnggKyB0aGlzLnNoaXAud2lkdGgvMikgJiYgYm9tYi55ID49ICh0aGlzLnNoaXAueSAtIHRoaXMuc2hpcC5oZWlnaHQvMikgJiYgYm9tYi55IDw9ICh0aGlzLnNoaXAueSArIHRoaXMuc2hpcC5oZWlnaHQvMikpIHtcbiAgICAgICAgdGhpcy5ib21icy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgZ2FtZS5saXZlcy0tO1xuICAgICAgICBnYW1lLnNvdW5kcy5wbGF5U291bmQoJ2V4cGxvc2lvbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vICBDaGVjayBmb3IgaW52YWRlci9zaGlwIGNvbGxpc2lvbnMuXG4gICAgZm9yKGxldCBpPTA7IGk8dGhpcy5pbnZhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGludmFkZXIgPSB0aGlzLmludmFkZXJzW2ldO1xuICAgICAgaWYoKGludmFkZXIueCArIGludmFkZXIud2lkdGgvMikgPiAodGhpcy5zaGlwLnggLSB0aGlzLnNoaXAud2lkdGgvMikgJiZcbiAgICAgIChpbnZhZGVyLnggLSBpbnZhZGVyLndpZHRoLzIpIDwgKHRoaXMuc2hpcC54ICsgdGhpcy5zaGlwLndpZHRoLzIpICYmXG4gICAgICAoaW52YWRlci55ICsgaW52YWRlci5oZWlnaHQvMikgPiAodGhpcy5zaGlwLnkgLSB0aGlzLnNoaXAuaGVpZ2h0LzIpICYmXG4gICAgICAoaW52YWRlci55IC0gaW52YWRlci5oZWlnaHQvMikgPCAodGhpcy5zaGlwLnkgKyB0aGlzLnNoaXAuaGVpZ2h0LzIpKSB7XG4gICAgICAgIC8vICBEZWFkIGJ5IGNvbGxpc2lvbiFcbiAgICAgICAgZ2FtZS5saXZlcyA9IDA7XG4gICAgICAgIGdhbWUuc291bmRzLnBsYXlTb3VuZCgnZXhwbG9zaW9uJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gIENoZWNrIGZvciBmYWlsdXJlXG4gICAgaWYoZ2FtZS5saXZlcyA8PSAwKSB7XG4gICAgICBnYW1lLm1vdmVUb1N0YXRlKG5ldyBHYW1lT3ZlclN0YXRlKCkpO1xuICAgIH1cblxuICAgIC8vICBDaGVjayBmb3IgdmljdG9yeVxuICAgIGlmKHRoaXMuaW52YWRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBnYW1lLnNjb3JlICs9IHRoaXMubGV2ZWwgKiA1MDtcbiAgICAgIGdhbWUubGV2ZWwgKz0gMTtcbiAgICAgIGdhbWUubW92ZVRvU3RhdGUobmV3IExldmVsSW50cm9TdGF0ZShnYW1lLmxldmVsKSk7XG4gICAgfVxuICB9XG5cbiAgZHJhdyhnYW1lLCBkdCwgY3R4KSB7XG4gICAgLy8gIENsZWFyIHRoZSBiYWNrZ3JvdW5kLlxuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgZ2FtZS53aWR0aCwgZ2FtZS5oZWlnaHQpO1xuXG4gICAgLy8gIERyYXcgc2hpcC5cbiAgICBjdHguZmlsbFN0eWxlID0gJyM5OTk5OTknO1xuICAgIGN0eC5maWxsUmVjdCh0aGlzLnNoaXAueCAtICh0aGlzLnNoaXAud2lkdGggLyAyKSwgdGhpcy5zaGlwLnkgLSAodGhpcy5zaGlwLmhlaWdodCAvIDIpLCB0aGlzLnNoaXAud2lkdGgsIHRoaXMuc2hpcC5oZWlnaHQpO1xuXG4gICAgLy8gIERyYXcgaW52YWRlcnMuXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjMDA2NjAwJztcbiAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmludmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgaW52YWRlciA9IHRoaXMuaW52YWRlcnNbaV07XG4gICAgICBjdHguZmlsbFJlY3QoaW52YWRlci54IC0gaW52YWRlci53aWR0aC8yLCBpbnZhZGVyLnkgLSBpbnZhZGVyLmhlaWdodC8yLCBpbnZhZGVyLndpZHRoLCBpbnZhZGVyLmhlaWdodCk7XG4gICAgfVxuXG4gICAgLy8gIERyYXcgYm9tYnMuXG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjZmY1NTU1JztcbiAgICBmb3IobGV0IGk9MDsgaTx0aGlzLmJvbWJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYm9tYiA9IHRoaXMuYm9tYnNbaV07XG4gICAgICBjdHguZmlsbFJlY3QoYm9tYi54IC0gMiwgYm9tYi55IC0gMiwgNCwgNCk7XG4gICAgfVxuXG4gICAgLy8gIERyYXcgcm9ja2V0cy5cbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZjAwMDAnO1xuICAgIGZvcihsZXQgaT0wOyBpPHRoaXMucm9ja2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IHJvY2tldCA9IHRoaXMucm9ja2V0c1tpXTtcbiAgICAgIGN0eC5maWxsUmVjdChyb2NrZXQueCwgcm9ja2V0LnkgLSAyLCAxLCA0KTtcbiAgICB9XG5cbiAgICAvLyAgRHJhdyBpbmZvLlxuICAgIGxldCB0ZXh0WXBvcyA9IGdhbWUuZ2FtZUJvdW5kcy5ib3R0b20gKyAoKGdhbWUuaGVpZ2h0IC0gZ2FtZS5nYW1lQm91bmRzLmJvdHRvbSkgLyAyKSArIDE0LzI7XG4gICAgY3R4LmZvbnQ9XCIxNHB4IEFyaWFsXCI7XG4gICAgY3R4LmZpbGxTdHlsZSA9ICcjZmZmZmZmJztcbiAgICBsZXQgaW5mbyA9IFwiTGl2ZXM6IFwiICsgZ2FtZS5saXZlcztcbiAgICBjdHgudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgY3R4LmZpbGxUZXh0KGluZm8sIGdhbWUuZ2FtZUJvdW5kcy5sZWZ0LCB0ZXh0WXBvcyk7XG4gICAgaW5mbyA9IFwiU2NvcmU6IFwiICsgZ2FtZS5zY29yZSArIFwiLCBMZXZlbDogXCIgKyBnYW1lLmxldmVsO1xuICAgIGN0eC50ZXh0QWxpZ24gPSBcInJpZ2h0XCI7XG4gICAgY3R4LmZpbGxUZXh0KGluZm8sIGdhbWUuZ2FtZUJvdW5kcy5yaWdodCwgdGV4dFlwb3MpO1xuXG4gICAgLy8gIElmIHdlJ3JlIGluIGRlYnVnIG1vZGUsIGRyYXcgYm91bmRzLlxuICAgIGlmKHRoaXMuY29uZmlnLmRlYnVnTW9kZSkge1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJyNmZjAwMDAnO1xuICAgICAgY3R4LnN0cm9rZVJlY3QoMCwwLGdhbWUud2lkdGgsIGdhbWUuaGVpZ2h0KTtcbiAgICAgIGN0eC5zdHJva2VSZWN0KGdhbWUuZ2FtZUJvdW5kcy5sZWZ0LCBnYW1lLmdhbWVCb3VuZHMudG9wLFxuICAgICAgICBnYW1lLmdhbWVCb3VuZHMucmlnaHQgLSBnYW1lLmdhbWVCb3VuZHMubGVmdCxcbiAgICAgICAgZ2FtZS5nYW1lQm91bmRzLmJvdHRvbSAtIGdhbWUuZ2FtZUJvdW5kcy50b3BcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAga2V5RG93bihnYW1lLCBrZXlDb2RlKSB7XG4gICAgaWYoa2V5Q29kZSA9PSAzMikge1xuICAgICAgLy8gIEZpcmUhXG4gICAgICB0aGlzLmZpcmVSb2NrZXQoKTtcbiAgICB9XG4gICAgaWYoa2V5Q29kZSA9PSA4MCkge1xuICAgICAgLy8gIFB1c2ggdGhlIHBhdXNlIHN0YXRlLlxuICAgICAgZ2FtZS5wdXNoU3RhdGUobmV3IFBhdXNlU3RhdGUoKSk7XG4gICAgfVxuICB9XG5cbiAga2V5VXAoZ2FtZSwga2V5Q29kZSkgeyB9XG5cbiAgZmlyZVJvY2tldCgpIHtcbiAgICAvLyAgSWYgd2UgaGF2ZSBubyBsYXN0IHJvY2tldCB0aW1lLCBvciB0aGUgbGFzdCByb2NrZXQgdGltZVxuICAgIC8vICBpcyBvbGRlciB0aGFuIHRoZSBtYXggcm9ja2V0IHJhdGUsIHdlIGNhbiBmaXJlLlxuICAgIGlmKHRoaXMubGFzdFJvY2tldFRpbWUgPT09IG51bGwgfHwgKChuZXcgRGF0ZSgpKS52YWx1ZU9mKCkgLSB0aGlzLmxhc3RSb2NrZXRUaW1lKSA+ICgxMDAwIC8gdGhpcy5jb25maWcucm9ja2V0TWF4RmlyZVJhdGUpKVxuICAgIHtcbiAgICAgIC8vICBBZGQgYSByb2NrZXQuXG4gICAgICB0aGlzLnJvY2tldHMucHVzaChuZXcgUm9ja2V0KHRoaXMuc2hpcC54LCB0aGlzLnNoaXAueSAtIDEyLCB0aGlzLmNvbmZpZy5yb2NrZXRWZWxvY2l0eSkpO1xuICAgICAgdGhpcy5sYXN0Um9ja2V0VGltZSA9IChuZXcgRGF0ZSgpKS52YWx1ZU9mKCk7XG5cbiAgICAgIC8vICBQbGF5IHRoZSAnc2hvb3QnIHNvdW5kLlxuICAgICAgZ2FtZS5zb3VuZHMucGxheVNvdW5kKCdzaG9vdCcpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBQYXVzZVN0YXRlIHtcbiAga2V5RG93bihnYW1lLCBrZXlDb2RlKSB7XG5cbiAgICBpZihrZXlDb2RlID09IDgwKSB7XG4gICAgICAvLyAgUG9wIHRoZSBwYXVzZSBzdGF0ZS5cbiAgICAgIGdhbWUucG9wU3RhdGUoKTtcbiAgICB9XG4gIH1cblxuICBkcmF3KGdhbWUsIGR0LCBjdHgpIHtcbiAgICAvLyAgQ2xlYXIgdGhlIGJhY2tncm91bmQuXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBnYW1lLndpZHRoLCBnYW1lLmhlaWdodCk7XG5cbiAgICBjdHguZm9udD1cIjE0cHggQXJpYWxcIjtcbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnO1xuICAgIGN0eC50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIjtcbiAgICBjdHgudGV4dEFsaWduPVwiY2VudGVyXCI7XG4gICAgY3R4LmZpbGxUZXh0KFwiUGF1c2VkXCIsIGdhbWUud2lkdGggLyAyLCBnYW1lLmhlaWdodC8yKTtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuLypcbkxldmVsIEludHJvIFN0YXRlXG5cblRoZSBMZXZlbCBJbnRybyBzdGF0ZSBzaG93cyBhICdMZXZlbCBYJyBtZXNzYWdlIGFuZFxuYSBjb3VudGRvd24gZm9yIHRoZSBsZXZlbC5cbiovXG5jbGFzcyBMZXZlbEludHJvU3RhdGUge1xuICBjb25zdHJ1Y3RvcihsZXZlbCkge1xuICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB0aGlzLmNvdW50ZG93bk1lc3NhZ2UgPSBcIjNcIjtcbiAgfVxuXG4gIHVwZGF0ZShnYW1lLCBkdCkge1xuICAgIC8vICBVcGRhdGUgdGhlIGNvdW50ZG93bi5cbiAgICBpZih0aGlzLmNvdW50ZG93biA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmNvdW50ZG93biA9IDM7IC8vIGNvdW50ZG93biBmcm9tIDMgc2Vjc1xuICAgIH1cbiAgICB0aGlzLmNvdW50ZG93biAtPSBkdDtcblxuICAgIGlmKHRoaXMuY291bnRkb3duIDwgMikge1xuICAgICAgdGhpcy5jb3VudGRvd25NZXNzYWdlID0gXCIyXCI7XG4gICAgfVxuICAgIGlmKHRoaXMuY291bnRkb3duIDwgMSkge1xuICAgICAgdGhpcy5jb3VudGRvd25NZXNzYWdlID0gXCIxXCI7XG4gICAgfVxuICAgIGlmKHRoaXMuY291bnRkb3duIDw9IDApIHtcbiAgICAgIC8vICBNb3ZlIHRvIHRoZSBuZXh0IGxldmVsLCBwb3BwaW5nIHRoaXMgc3RhdGUuXG4gICAgICBnYW1lLm1vdmVUb1N0YXRlKG5ldyBQbGF5U3RhdGUoZ2FtZS5jb25maWcsIHRoaXMubGV2ZWwpKTtcbiAgICB9XG4gIH1cblxuICBkcmF3KGdhbWUsIGR0LCBjdHgpIHtcbiAgICAvLyAgQ2xlYXIgdGhlIGJhY2tncm91bmQuXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBnYW1lLndpZHRoLCBnYW1lLmhlaWdodCk7XG5cbiAgICBjdHguZm9udD1cIjM2cHggQXJpYWxcIjtcbiAgICBjdHguZmlsbFN0eWxlID0gJyNmZmZmZmYnO1xuICAgIGN0eC50ZXh0QmFzZWxpbmU9XCJtaWRkbGVcIjtcbiAgICBjdHgudGV4dEFsaWduPVwiY2VudGVyXCI7XG4gICAgY3R4LmZpbGxUZXh0KFwiTGV2ZWwgXCIgKyB0aGlzLmxldmVsLCBnYW1lLndpZHRoIC8gMiwgZ2FtZS5oZWlnaHQvMik7XG4gICAgY3R4LmZvbnQ9XCIyNHB4IEFyaWFsXCI7XG4gICAgY3R4LmZpbGxUZXh0KFwiUmVhZHkgaW4gXCIgKyB0aGlzLmNvdW50ZG93bk1lc3NhZ2UsIGdhbWUud2lkdGggLyAyLCBnYW1lLmhlaWdodC8yICsgMzYpO1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbi8qXG5cblNoaXBcblxuVGhlIHNoaXAgaGFzIGEgcG9zaXRpb24gYW5kIHRoYXQncyBhYm91dCBpdC5cblxuKi9cbmZ1bmN0aW9uIFNoaXAoeCwgeSkge1xuICB0aGlzLnggPSB4O1xuICB0aGlzLnkgPSB5O1xuICB0aGlzLndpZHRoID0gMjA7XG4gIHRoaXMuaGVpZ2h0ID0gMTY7XG59XG5cbi8qXG5Sb2NrZXRcblxuRmlyZWQgYnkgdGhlIHNoaXAsIHRoZXkndmUgZ290IGEgcG9zaXRpb24sIHZlbG9jaXR5IGFuZCBzdGF0ZS5cblxuKi9cbmZ1bmN0aW9uIFJvY2tldCh4LCB5LCB2ZWxvY2l0eSkge1xuICB0aGlzLnggPSB4O1xuICB0aGlzLnkgPSB5O1xuICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7XG59XG5cbi8qXG5Cb21iXG5cbkRyb3BwZWQgYnkgaW52YWRlcnMsIHRoZXkndmUgZ290IHBvc2l0aW9uLCB2ZWxvY2l0eS5cblxuKi9cbmZ1bmN0aW9uIEJvbWIoeCwgeSwgdmVsb2NpdHkpIHtcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbiAgdGhpcy52ZWxvY2l0eSA9IHZlbG9jaXR5O1xufVxuXG4vKlxuSW52YWRlclxuXG5JbnZhZGVyJ3MgaGF2ZSBwb3NpdGlvbiwgdHlwZSwgcmFuay9maWxlIGFuZCB0aGF0J3MgYWJvdXQgaXQuXG4qL1xuXG5mdW5jdGlvbiBJbnZhZGVyKHgsIHksIHJhbmssIGZpbGUsIHR5cGUpIHtcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcbiAgdGhpcy5yYW5rID0gcmFuaztcbiAgdGhpcy5maWxlID0gZmlsZTtcbiAgdGhpcy50eXBlID0gdHlwZTtcbiAgdGhpcy53aWR0aCA9IDE4O1xuICB0aGlzLmhlaWdodCA9IDE0O1xufVxuXG4vKlxuR2FtZSBTdGF0ZVxuXG5BIEdhbWUgU3RhdGUgaXMgc2ltcGx5IGFuIHVwZGF0ZSBhbmQgZHJhdyBwcm9jLlxuV2hlbiBhIGdhbWUgaXMgaW4gdGhlIHN0YXRlLCB0aGUgdXBkYXRlIGFuZCBkcmF3IHByb2NzIGFyZVxuY2FsbGVkLCB3aXRoIGEgZHQgdmFsdWUgKGR0IGlzIGRlbHRhIHRpbWUsIGkuZS4gdGhlIG51bWJlcilcbm9mIHNlY29uZHMgdG8gdXBkYXRlIG9yIGRyYXcpLlxuXG4qL1xuZnVuY3Rpb24gR2FtZVN0YXRlKHVwZGF0ZVByb2MsIGRyYXdQcm9jLCBrZXlEb3duLCBrZXlVcCwgZW50ZXIsIGxlYXZlKSB7XG4gIHRoaXMudXBkYXRlUHJvYyA9IHVwZGF0ZVByb2M7XG4gIHRoaXMuZHJhd1Byb2MgPSBkcmF3UHJvYztcbiAgdGhpcy5rZXlEb3duID0ga2V5RG93bjtcbiAgdGhpcy5rZXlVcCA9IGtleVVwO1xuICB0aGlzLmVudGVyID0gZW50ZXI7XG4gIHRoaXMubGVhdmUgPSBsZWF2ZTtcbn1cblxuLypcblxuU291bmRzXG5cblRoZSBzb3VuZHMgY2xhc3MgaXMgdXNlZCB0byBhc3luY2hyb25vdXNseSBsb2FkIHNvdW5kcyBhbmQgYWxsb3dcbnRoZW0gdG8gYmUgcGxheWVkLlxuXG4qL1xuY2xhc3MgU291bmRzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy8gIFRoZSBhdWRpbyBjb250ZXh0LlxuICAgIHRoaXMuYXVkaW9Db250ZXh0ID0gbnVsbDtcbiAgICAvLyAgVGhlIGFjdHVhbCBzZXQgb2YgbG9hZGVkIHNvdW5kcy5cbiAgICB0aGlzLnNvdW5kcyA9IHt9O1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICAvLyAgQ3JlYXRlIHRoZSBhdWRpbyBjb250ZXh0LCBwYXlpbmcgYXR0ZW50aW9uIHRvIHdlYmtpdCBicm93c2Vycy5cbiAgICBsZXQgY29udGV4dCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcbiAgICB0aGlzLmF1ZGlvQ29udGV4dCA9IG5ldyBjb250ZXh0KCk7XG4gICAgdGhpcy5tdXRlID0gZmFsc2U7XG4gIH1cblxuICBsb2FkU291bmQobmFtZSwgdXJsKSB7XG4gICAgLy8gIFJlZmVyZW5jZSB0byBvdXJzZWx2ZXMgZm9yIGNsb3N1cmVzLlxuICAgIGxldCBzZWxmID0gdGhpcztcblxuICAgIC8vICBDcmVhdGUgYW4gZW50cnkgaW4gdGhlIHNvdW5kcyBvYmplY3QuXG4gICAgdGhpcy5zb3VuZHNbbmFtZV0gPSBudWxsO1xuXG4gICAgLy8gIENyZWF0ZSBhbiBhc3luY2hyb25vdXMgcmVxdWVzdCBmb3IgdGhlIHNvdW5kLlxuICAgIGxldCByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICByZXEucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmF1ZGlvQ29udGV4dC5kZWNvZGVBdWRpb0RhdGEocmVxLnJlc3BvbnNlLCBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgc2VsZi5zb3VuZHNbbmFtZV0gPSB7YnVmZmVyOiBidWZmZXJ9O1xuICAgICAgfSk7XG4gICAgfTtcbiAgICB0cnkge1xuICAgICAgcmVxLnNlbmQoKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQW4gZXhjZXB0aW9uIG9jY3VyZWQgZ2V0dGluZyBzb3VuZCB0aGUgc291bmQgXCIgKyBuYW1lICsgXCIgdGhpcyBtaWdodCBiZSBcIiArXG4gICAgICBcImJlY2F1c2UgdGhlIHBhZ2UgaXMgcnVubmluZyBmcm9tIHRoZSBmaWxlIHN5c3RlbSwgbm90IGEgd2Vic2VydmVyLlwiKTtcbiAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIH1cbiAgfVxuXG4gIHBsYXlTb3VuZChuYW1lKSB7XG4gICAgLy8gIElmIHdlJ3ZlIG5vdCBnb3QgdGhlIHNvdW5kLCBkb24ndCBib3RoZXIgcGxheWluZyBpdC5cbiAgICBpZih0aGlzLnNvdW5kc1tuYW1lXSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuc291bmRzW25hbWVdID09PSBudWxsIHx8IHRoaXMubXV0ZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vICBDcmVhdGUgYSBzb3VuZCBzb3VyY2UsIHNldCB0aGUgYnVmZmVyLCBjb25uZWN0IHRvIHRoZSBzcGVha2VycyBhbmRcbiAgICAvLyAgcGxheSB0aGUgc291bmQuXG4gICAgbGV0IHNvdXJjZSA9IHRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xuICAgIHNvdXJjZS5idWZmZXIgPSB0aGlzLnNvdW5kc1tuYW1lXS5idWZmZXI7XG4gICAgc291cmNlLmNvbm5lY3QodGhpcy5hdWRpb0NvbnRleHQuZGVzdGluYXRpb24pO1xuICAgIHNvdXJjZS5zdGFydCgwKTtcbiAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGpzL2dhbWUuanMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBT0E7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBcEJBO0FBc0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNJQTtBQUFBO0FBQUE7QUFDQTtBQTZJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ0E7QUFDQTtBQXFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQkE7QUFDQTtBQTRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBclRBO0FBQ0E7QUF1VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5CQTtBQUNBO0FBcUJBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckNBO0FBQ0E7QUF3Q0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwREEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ })
/******/ ]);